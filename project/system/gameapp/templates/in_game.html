<!-- templates/gameapp/in_game.html -->
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>게임 화면</title>
        <!-- CSS 연결 -->
        <link rel="stylesheet" href="{% static 'css/in_game.css' %}">
    </head>
    <body>
        <!-- 배경 비디오 -->
        <div class="video-background">
            <video autoplay muted loop id="bgVideo">
                <source src="{% static 'videos/background.mp4' %}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
        
    <div class="center-content"></div>
        <h1>게임에 참여했습니다.</h1>
        {% if nickname %}
            <p>ID: <strong>{{ nickname }}</strong></p>
            <p>이 페이지를 닫지 마시고 전방 화면을 봐주세요.</p>
            <p>다른 페이지로 이동하면 경품추첨에서 제외됩니다.</p>
            <!-- 추가: 기본 화면으로 이동 -->
            <button onclick="location.href='/'">기본 화면으로 이동</button>
        {% else %}
            <p>닉네임이 세션에 없습니다. 다시 입력해주세요.</p>
        {% endif %}

    <!-- <script>
        // 1) 폴링 함수 정의
        function checkGameState() {
            fetch("{% url 'game_state_api' %}")  // /api/game-state/
                .then(response => response.json())
                .then(data => {
                    // data = { is_open: true/false }
                    if (data.is_open) {
                        // is_open이 true면 닉네임 입력 폼으로 강제 이동
                        window.location.href = "{% url 'nickname_input' %}";
                    }
                })
                .catch(error => {
                    console.error('에러 발생:', error);
                });
        }

        // 2) 일정 간격(예: 5초)마다 checkGameState() 호출
        setInterval(checkGameState, 2000);
    </script> -->
</body>
</html>


